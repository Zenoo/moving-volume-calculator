class MovingVolumeCalculator{constructor(target,parameters){if(this._wrapper=target instanceof Element?target:document.querySelector(target),!this._wrapper)throw new Error("MovingVolumeCalculator: "+("string"==typeof target?"The selector `"+target+"` didn't match any element.":"The element you provided was undefined"));if(this._wrapper.classList.contains("mvc-wrapper"))throw new Error("MovingVolumeCalculator: The element has already been initialized.");this._parameters=parameters||{},this.volume=0,this._parameters.lang||(this._parameters.lang="en"),this._createDictionary(),this._build(),this._listen()}_createDictionary(){this._dictionary={en:{volume:"Volume (m3)",surfaceOptionEnable:"I don't know my volume / I'd rather fill out my surface",surfaceOptionDisable:"I'd rather fill out my volume",wrongVolume:"The volume isn't a valid number",surface:"Surface (m2)",wrongSurface:"The surface isn't a valid number"},fr:{volume:"Volume (m3)",surfaceOptionEnable:"Je ne connais pas mon volume / Je préfère renseigner ma surface",surfaceOptionDisable:"Je préfère renseigner mon volume",wrongVolume:"Le volume n'est pas un nombre valide",surface:"Surface (m2)",wrongSurface:"The surface isn't a valid number"}}}_build(){this._wrapper.classList.add("mvc-wrapper");let line=document.createElement("p");this._wrapper.appendChild(line),this._volumeInput=document.createElement("input"),this._volumeInput.classList.add("mvc-volume-input"),this._volumeInput.placeholder=this._dictionary[this._parameters.lang].volume,line.appendChild(this._volumeInput),(line=document.createElement("p")).classList.add("mvc-surface-toggler"),this._wrapper.appendChild(line),this._surfaceOption=document.createElement("a"),this._surfaceOption.classList.add("mvc-surface-enable"),this._surfaceOption.innerText=this._dictionary[this._parameters.lang].surfaceOptionEnable,this._surfaceOption.href="",line.appendChild(this._surfaceOption),(line=document.createElement("p")).classList.add("mvc-hidden"),this._wrapper.appendChild(line),this._surfaceInput=document.createElement("input"),this._surfaceInput.classList.add("mvc-surface-input"),this._surfaceInput.placeholder=this._dictionary[this._parameters.lang].surface,line.appendChild(this._surfaceInput)}_listen(){this._volumeInput.addEventListener("input",()=>{/^\d+([.,]\d{0,2})?$/u.test(this._volumeInput.value)?(this._clearHints(this._volumeInput),this.volume=+this._volumeInput.value.replace(",",".")):this._addHint(this._volumeInput,"error",this._dictionary[this._parameters.lang].wrongVolume)}),this._surfaceOption.addEventListener("click",e=>{e.preventDefault(),this._surfaceOption.classList.contains("mvc-surface-enable")?(this._surfaceOption.classList.remove("mvc-surface-enable"),this._surfaceOption.classList.add("mvc-surface-disable"),this._surfaceOption.innerText=this._dictionary[this._parameters.lang].surfaceOptionDisable,this._volumeInput.disabled=!0,this._surfaceInput.parentElement.classList.remove("mvc-hidden")):(this._surfaceOption.classList.remove("mvc-surface-disable"),this._surfaceOption.classList.add("mvc-surface-enable"),this._surfaceOption.innerText=this._dictionary[this._parameters.lang].surfaceOptionEnable,this._volumeInput.disabled=!1,this._surfaceInput.parentElement.classList.add("mvc-hidden"))}),this._surfaceInput.addEventListener("input",()=>{if(/^\d+([.,]\d{0,2})?$/u.test(this._surfaceInput.value)){this._clearHints(this._surfaceInput);const volume=MovingVolumeCalculator.fromSurface(+this._surfaceInput.value.replace(",","."));this.volume=volume,this._volumeInput.value=volume}else this._addHint(this._surfaceInput,"error",this._dictionary[this._parameters.lang].wrongSurface)})}_addHint(target,type,text){const parent=target.parentNode,hint=document.createElement("span");let icon="";switch(type){case"error":icon="⚠"}hint.innerText=icon+" "+text,hint.classList.add("mvc-hint",type),target.previousElementSibling&&target.previousElementSibling.classList.contains("mvc-hint")&&target.previousElementSibling.remove(),parent.insertBefore(hint,target)}_clearHints(target){target.previousElementSibling&&target.previousElementSibling.classList.contains("mvc-hint")&&target.previousElementSibling.remove()}destroy(){}static fromSurface(surface){return Math.round(.45*surface*100)/100}static destroy(selector){const element=document.querySelector(selector);element&&element.remove()}}