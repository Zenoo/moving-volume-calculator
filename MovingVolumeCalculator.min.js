class MovingVolumeCalculator{constructor(target,parameters){if(this._wrapper=target instanceof Element?target:document.querySelector(target),!this._wrapper)throw new Error("MovingVolumeCalculator: "+("string"==typeof target?"The selector `"+target+"` didn't match any element.":"The element you provided was undefined"));if(this._wrapper.classList.contains("mvc-wrapper"))throw new Error("MovingVolumeCalculator: The element has already been initialized.");this._parameters=parameters||{},this.volume=0,this._parameters.lang||(this._parameters.lang="en"),this._createDictionary(),this._build(),this._listen()}_createDictionary(){this._dictionary={en:{volume:"Volume (m3)",surfaceOption:"I don't know my volume / I'd rather fill out my surface",wrongVolume:"The volume isn't a valid number"},fr:{volume:"Volume (m3)",surfaceOption:"Je ne connais pas mon volume / Je préfère renseigner ma surface",wrongVolume:"Le volume n'est pas un nombre valide"}}}_build(){this._wrapper.classList.add("mvc-wrapper");let line=document.createElement("p");this._wrapper.appendChild(line),this._input=document.createElement("input"),this._input.classList.add("mvc-volume-input"),this._input.placeholder=this._dictionary[this._parameters.lang].volume,line.appendChild(this._input),(line=document.createElement("p")).classList.add("mvc-surface-toggler"),this._wrapper.appendChild(line),this._surfaceOption=document.createElement("a"),this._surfaceOption.classList.add("mvc-surface-enable"),this._surfaceOption.innerText=this._dictionary[this._parameters.lang].surfaceOption,this._surfaceOption.href="",line.appendChild(this._surfaceOption)}_listen(){this._input.addEventListener("input",()=>{/^\d+([.,]\d{0,2})?$/u.test(this._input.value)?(this._clearHints(this._input),this.volume=+this._input.value.replace(",",".")):this._addHint(this._input,"error",this._dictionary[this._parameters.lang].wrongVolume)})}_addHint(target,type,text){const parent=target.parentNode,hint=document.createElement("span");let icon="";switch(type){case"error":icon="⚠"}hint.innerText=icon+" "+text,hint.classList.add("mvc-hint",type),target.previousElementSibling&&target.previousElementSibling.classList.contains("mvc-hint")&&target.previousElementSibling.remove(),parent.insertBefore(hint,target)}_clearHints(target){target.previousElementSibling&&target.previousElementSibling.classList.contains("mvc-hint")&&target.previousElementSibling.remove()}destroy(){}static destroy(selector){const element=document.querySelector(selector);element&&element.remove()}}